<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>SIMEC - Sistema de Almacén</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>

<body>
<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-icon">
        <span class="material-icons">inventory_2</span>
      </div>
      <div class="logo-text">
        <h1>SIMEC</h1>
        <p>Sistema de Almacén</p>
      </div>
    </div>

    <nav class="nav">
      <button class="nav-btn activa" data-section="materiales">
        <span class="material-icons">warehouse</span> Materiales
      </button>

      <button class="nav-btn" data-section="proyectos">
        <span class="material-icons">assignment</span> Proyectos
      </button>

      <button class="nav-btn" data-section="admin-almacen">
        <span class="material-icons">build</span> Admin Almacén
      </button>

      <button class="nav-btn" data-section="movimientos">
        <span class="material-icons">timeline</span> Movimientos
      </button>

      <!-- SOLO ADMIN -->
      <button class="nav-btn" data-section="usuarios" id="btn-nav-usuarios" style="display:none;">
        <span class="material-icons">manage_accounts</span> Usuarios
      </button>
    </nav>

    <footer class="sidebar-footer">
      <small>SIMEC</small>
    </footer>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <header class="main-header">
      <div>
        <h2>Panel de Control</h2>
        <p>Gestión de almacén y proyectos</p>
      </div>
      <button onclick="logout()" class="btn-secondary">Salir</button>
    </header>

    <!-- ================= MATERIALES ================= -->
    <section id="materiales" class="seccion activa">
      <div class="section-title">
        <h3>Materiales</h3>
      </div>

      <div class="card">
        <div class="card-header">
          <h4>Lista de materiales</h4>
          <div>
            <button id="btn-export-materiales-excel" class="btn-secondary">Excel</button>
            <button id="btn-export-materiales-pdf" class="btn-secondary">PDF</button>
          </div>
        </div>

        <div class="card-body table-wrapper">
          <table class="table" id="tabla-materiales">
            <thead>
              <tr>
                <th>Código</th>
                <th>Nombre</th>
                <th>Stock</th>
                <th>Ubicación</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ================= PROYECTOS ================= -->
    <section id="proyectos" class="seccion">
      <div class="section-title">
        <h3>Proyectos</h3>
      </div>

      <div class="grid-2">

        <div class="card">
          <div class="card-header">
            <h4>Proyectos</h4>
          </div>
          <div class="card-body">
            <ul id="lista-proyectos" class="list"></ul>
          </div>

          <div class="card-footer">
            <form id="form-proyecto" class="form">
              <input name="clave" placeholder="Clave" required />
              <input name="nombre" placeholder="Nombre" required />
              <button class="btn-primary" type="submit">Crear proyecto</button>
            </form>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h4>Proyecto seleccionado</h4>
            <p class="small">
              <span id="info-proyecto-seleccionado">Ninguno</span>
            </p>
          </div>

          <div class="card-body">
            <div style="display:flex; gap:10px; align-items:center;">
              <strong>Etapa activa:</strong>
              <span id="etapa-activa-texto">—</span>

              <button id="btn-crear-etapa" class="btn-secondary">Crear etapa</button>
              <button id="btn-cerrar-etapa" class="btn-secondary">Cerrar etapa</button>

              <select id="select-etapa">
                <option value="__ALL__">Todas</option>
              </select>

              <button id="btn-export-etapa-excel" class="btn-secondary">Excel etapa</button>
              <button id="btn-export-etapa-pdf" class="btn-secondary">PDF etapa</button>
            </div>

            <div class="small" style="margin-top:10px;">
              Total etapa: <strong id="total-etapa">$0.00</strong> ·
              Total proyecto: <strong id="total-proyecto">$0.00</strong>
            </div>
          </div>

          <div class="card-body table-wrapper">
            <table class="table" id="tabla-movimientos-proyecto">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Material</th>
                  <th>Cantidad</th>
                  <th>Usuario</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      </div>
    </section>

    <!-- ================= ADMIN ALMACÉN ================= -->
    <section id="admin-almacen" class="seccion">
      <div class="section-title">
        <h3>Admin Almacén</h3>
      </div>
      <p>Solo administradores.</p>
    </section>

    <!-- ================= MOVIMIENTOS ================= -->
    <section id="movimientos" class="seccion">
      <div class="section-title">
        <h3>Movimientos</h3>
      </div>
      <div class="card">
        <div class="card-body table-wrapper">
          <table class="table" id="tabla-movimientos-global">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Material</th>
                <th>Proyecto</th>
                <th>Cantidad</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ================= USUARIOS ================= -->
    <section id="usuarios" class="seccion">
      <div class="section-title">
        <h3>Usuarios</h3>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-header"><h4>Usuarios</h4></div>
          <div class="card-body table-wrapper">
            <table class="table" id="tabla-usuarios">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Email</th>
                  <th>Rol</th>
                  <th>Activo</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <div class="card-header"><h4>Crear usuario</h4></div>
          <div class="card-body">
            <form id="form-usuario" class="form">
              <input name="nombre" placeholder="Nombre" required />
              <input name="email" type="email" placeholder="Email" required />
              <input name="password" type="password" placeholder="Contraseña" required />
              <select name="rol">
                <option value="user">user</option>
                <option value="admin">admin</option>
              </select>
              <button class="btn-primary">Crear</button>
            </form>
          </div>
        </div>
      </div>
    </section>

  </main>
</div>

<script src="script.js"></script>
</body>
</html>
