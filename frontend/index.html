<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>SIMEC - Sistema de Almacén</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sidebar">

      <div class="logo">
        <div class="logo-icon">
          <span class="material-icons">inventory_2</span>
        </div>
        <div class="logo-text">
          <h1>SIMEC</h1>
          <p>Sistema de Almacén</p>
        </div>
      </div>

      <nav class="nav">
        <button class="nav-btn activa" data-section="materiales">
          <span class="material-icons">warehouse</span>
          Materiales
        </button>
        <button class="nav-btn" data-section="usuarios">
      <span class="material-icons">people</span>
        Usuarios
       </button>


        <button class="nav-btn" data-section="proyectos">
          <span class="material-icons">assignment</span>
          Proyectos
        </button>

        <button class="nav-btn" data-section="admin-almacen">
          <span class="material-icons">build</span>
          Admin Almacén
        </button>

        <button class="nav-btn" data-section="movimientos">
          <span class="material-icons">timeline</span>
          Movimientos
        </button>
      </nav>

      <footer class="sidebar-footer">
        <small>SIMEC · Material Design UI</small>
      </footer>
    </aside>

    <!-- MAIN -->
    <main class="main">

      <!-- HEADER -->
      <header class="main-header">
        <div>
          <h2>Panel de Control</h2>
          <p>Gestión de materiales, proyectos y movimientos.</p>
        </div>

        <button class="btn-secondary btn-logout" onclick="logout()">
          <span class="material-icons">logout</span>
          Salir
        </button>
      </header>
      <!-- =============================
           SECCIÓN: USUARIOS
           ============================= -->
      <section id="usuarios" class="seccion">
  <div class="section-title">
    <h3>Usuarios</h3>
    <p>Solo admin puede crear y ver usuarios.</p>
  </div>

  <div class="grid-2">
    <div class="card">
      <div class="card-header"><h4>Crear usuario</h4></div>
      <div class="card-body">
        <form id="form-usuario" class="form">
          <div class="form-group">
            <label>Nombre *</label>
            <input name="nombre" required />
          </div>

          <div class="form-group">
            <label>Email *</label>
            <input name="email" type="email" required />
          </div>

          <div class="form-group">
            <label>Contraseña *</label>
            <input name="password" type="password" required />
          </div>

          <div class="form-group">
            <label>Rol</label>
            <select name="rol">
              <option value="user">Usuario</option>
              <option value="admin">Admin</option>
            </select>
          </div>

          <button class="btn-primary" type="submit">
            <span class="material-icons">person_add</span> Crear
          </button>
        </form>
      </div>
    </div>

    <div class="card">
      <div class="card-header"><h4>Lista de usuarios</h4></div>
      <div class="card-body table-wrapper">
        <table class="table" id="tabla-usuarios">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Email</th>
              <th>Rol</th>
              <th>Activo</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</section>

      <!-- =============================
           SECCIÓN: MATERIALES
           ============================= -->
      <section id="materiales" class="seccion activa">
        <div class="section-title">
          <h3>Materiales</h3>
          <p>Alta y consulta de materiales registrados.</p>
        </div>

        <div class="grid-2">

          <div class="card">
            <div class="card-header">
              <h4>Lista de materiales</h4>
              <div style="display:flex; gap:8px; margin-left:auto;">
  <button class="btn-secondary" id="btn-export-materiales-excel">Exportar Excel</button>
  <button class="btn-secondary" id="btn-export-materiales-pdf">Exportar PDF</button>
</div>

            </div>

            <div class="card-body table-wrapper">
              <table class="table" id="tabla-materiales">
                <thead>
                  <tr>
                    <th>Código</th>
                    <th>Nombre</th>
                    <th>Stock</th>
                    <th>Ubicación</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h4>Registrar nuevo material</h4>
            </div>

            <div class="card-body">
              <form id="form-material" class="form">

                <div class="form-group">
                  <label>Código *</label>
                  <input type="text" name="codigo" required />
                </div>

                <div class="form-group">
                  <label>Nombre *</label>
                  <input type="text" name="nombre" required />
                </div>

                <div class="form-group">
                  <label>Stock inicial</label>
                  <input type="number" name="stock_inicial" step="0.01" />
                </div>

                <div class="form-group">
                  <label>Stock mínimo</label>
                  <input type="number" name="stock_minimo" step="0.01" />
                </div>

                <div class="form-group">
                  <label>Ubicación</label>
                  <input type="text" name="ubicacion" />
                </div>

                <button class="btn-primary" type="submit">
                  <span class="material-icons">save</span> Guardar
                </button>
              </form>
            </div>
          </div>

        </div>
      </section>

      <!-- =============================
           SECCIÓN: PROYECTOS
           ============================= -->
      <section id="proyectos" class="seccion">

        <div class="section-title">
          <h3>Proyectos</h3>
          <p>Gestión de proyectos y salidas de material asociadas.</p>
        </div>

        <div class="grid-2">

          <div class="card">
            <div class="card-header">
              <h4>Proyectos registrados</h4>
            </div>

            <div class="card-body">
              <ul id="lista-proyectos" class="list"></ul>
            </div>

            <div class="card-footer">
              <h4>Nuevo Proyecto</h4>

              <form id="form-proyecto" class="form">

                <div class="form-group">
                  <label>Clave *</label>
                  <input type="text" name="clave" required />
                </div>

                <div class="form-group">
                  <label>Nombre *</label>
                  <input type="text" name="nombre" required />
                </div>

                <div class="form-group">
                  <label>Cliente</label>
                  <input type="text" name="cliente" />
                </div>

                <div class="form-group">
                  <label>Fecha inicio</label>
                  <input type="date" name="fecha_inicio" />
                </div>

                <div class="form-group">
                  <label>Descripción</label>
                  <textarea name="descripcion" rows="2"></textarea>
                </div>

                <button class="btn-primary" type="submit">
                  <span class="material-icons">add_circle</span>
                  Crear Proyecto
                </button>

              </form>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h4>Materiales del proyecto</h4>
              <p class="small">Proyecto seleccionado: <span id="info-proyecto-seleccionado">Ninguno</span></p>
            </div>

            <div class="card-body">
              <form id="form-salida-proyecto" class="form form-inline">

                <div class="form-group">
                  <label>Material</label>
                  <select id="select-material-proyecto" name="material_id"></select>
                </div>

                <div class="form-group">
                  <label>Cantidad</label>
                  <input type="number" step="0.01" name="cantidad" required />
                </div>

                <div class="form-group">
                  <label>Comentario</label>
                  <input type="text" name="comentario" />
                </div>

                <button class="btn-primary" type="submit">
                  <span class="material-icons">send</span>
                  Registrar salida
                </button>
              </form>
            </div>

            <div class="card-body table-wrapper">
              <table class="table" id="tabla-movimientos-proyecto">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Material</th>
                    <th>Tipo</th>
                    <th>Cantidad</th>
                    <th>Comentario</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

          </div>

        </div>
      </section>

      <!-- =============================
           SECCIÓN: ADMIN ALMACÉN
           ============================= -->
      <section id="admin-almacen" class="seccion">

        <div class="section-title">
          <h3>Admin de Almacén</h3>
          <p>Edición y ajustes de materiales.</p>
        </div>

        <div class="grid-2">

          <div class="card">
            <div class="card-header">
              <h4>Materiales registrados</h4>
            </div>

            <div class="card-body table-wrapper">
              <table class="table" id="tabla-admin-materiales">
                <thead>
                  <tr>
                    <th>Código</th>
                    <th>Nombre</th>
                    <th>Stock</th>
                    <th>Ubicación</th>
                    <th>Acción</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h4>Editar Material</h4>
            </div>

            <div class="card-body">

              <div id="admin-form-panel" style="display:none;">
                <form id="form-editar-material" class="form">

                  <div class="form-group">
                    <label>Código</label>
                    <input type="text" name="codigo" disabled />
                  </div>

                  <div class="form-group">
                    <label>Nombre</label>
                    <input type="text" name="nombre" />
                  </div>

                  <div class="form-group">
                    <label>Stock mínimo</label>
                    <input type="number" name="stock_minimo" step="0.01" />
                  </div>

                  <div class="form-group">
                    <label>Ubicación</label>
                    <input type="text" name="ubicacion" />
                  </div>

                  <button class="btn-primary" type="submit">
                    <span class="material-icons">save</span>
                    Guardar cambios
                  </button>

                </form>

                <hr class="divider">

                <h4>Ajuste de Stock</h4>

                <form id="form-ajuste-stock" class="form form-inline">

                  <div class="form-group">
                    <label>Tipo</label>
                    <select name="tipo">
                      <option value="entrada">Entrada</option>
                      <option value="salida">Salida</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label>Cantidad</label>
                    <input type="number" name="cantidad" step="0.01" required />
                  </div>

                  <div class="form-group">
                    <label>Comentario</label>
                    <input type="text" name="comentario" />
                  </div>

                  <button class="btn-secondary" type="submit">
                    <span class="material-icons">autorenew</span>
                    Aplicar ajuste
                  </button>

                </form>

              </div>

              <p class="hint">Seleccione un material para editar.</p>

            </div>
          </div>

        </div>
      </section>

      <!-- =============================
           SECCIÓN: MOVIMIENTOS
           ============================= -->
      <section id="movimientos" class="seccion">

        <div class="section-title">
          <h3>Movimientos</h3>
          <p>Historial global de entradas y salidas.</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h4>Historial</h4>
          </div>

          <div class="card-body table-wrapper">
            <table class="table" id="tabla-movimientos-global">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Material</th>
                  <th>Proyecto</th>
                  <th>Tipo</th>
                  <th>Cantidad</th>
                  <th>Comentario</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      </section>

    </main>

  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script src="js/auth.js"></script>
</body>

</html>
